---
layout: post
title: "Creating an Accessible Custom Checkbox"
date: 2017-10-04 01:04:20 UTC
excerpt: " Native HTML controls work great up until you need to apply custom styling. It’s pretty difficult to style controls like selects, checkboxes, and radio buttons. That’s why people usually end up ditching the native controls..."
---

 <p>Native HTML controls work great up until you need to apply custom styling. It’s pretty difficult to style controls like selects, checkboxes, and radio buttons. That’s why people usually end up ditching the native controls and write their own controls in HTML/CSS/JS.</p><p>Recreating your own controls on the surface seems simple, but it is more complicated than you think. You now have to ensure that keyboard users &amp; all forms of assistive tech users can still activate that custom control. It is now up to you to manage the current state of that control.</p><p>Using just JavaScript to recreate the control isn’t enough. This is because we have to fill in the <a href="https://developers.google.com/web/fundamentals/accessibility/semantics-builtin/the-accessibility-tree">Accessibility Tree</a> for this custom element. For example, if you’re recreating a checkbox from a span this would not be enough:</p><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fembed%2Fpreview%2FayajRW%3Fheight%3D600%26slug-hash%3DayajRW%26default-tabs%3Dcss%2Cresult%26host%3Dhttps%3A%2F%2Fcodepen.io%26embed-version%3D2&amp;url=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fpen%2FayajRW&amp;image=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fm.cdpn.io%2Fscreenshot-coming-soon-small.png&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=codepen" width="800" height="600" frameborder="0" scrolling="no"><a href="https://medium.com/media/3a7969b682c97de070bd97e87d1d5319/href">https://medium.com/media/3a7969b682c97de070bd97e87d1d5319/href</a></iframe><p>To a user who is <em>clicking</em> on the span, this would seem to work out fine, JavaScript is doing its job. What if you try to activate the checkbox by pressing enter or spacebar? That won’t work because you can’t tab to the “checkbox”. That’s an easy fix, all we have to do is add a tabindex to the span:</p><pre>&lt;span id=&quot;checkbox&quot; tabindex=&quot;0&quot;&gt;&lt;/span&gt;</pre><p>Now we can tab to the “checkbox”, but pressing the space bar or enter doesn’t activate it. This means those who use your app with a keyboard won’t be able to use this checkbox.</p><p>If you turn on a screen reader and navigate to that checkbox, it doesn’t tell you any information about what element it might be. It just says “group”. Pressing enter or spacebar toggles the checkbox but the screen reader is never updated.</p><p>To fill in the gaps of our span checkbox we can change the role of the element to checkbox and add a keydown handler to catch enter or spacebar presses.</p><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fembed%2Fpreview%2FNvLBOZ%3Fheight%3D600%26slug-hash%3DNvLBOZ%26default-tabs%3Djs%2Cresult%26host%3Dhttps%3A%2F%2Fcodepen.io%26embed-version%3D2&amp;url=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fpen%2FNvLBOZ&amp;image=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fi.cdpn.io%2F18484.NvLBOZ.small.a6f1b09e-f53e-4967-9c04-5ba0aedabaa4.png&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=codepen" width="800" height="600" frameborder="0" scrolling="no"><a href="https://medium.com/media/e240cc6342b1fea023b7505e4318377b/href">https://medium.com/media/e240cc6342b1fea023b7505e4318377b/href</a></iframe><p>Now if we tab to our checkbox we can press enter or spacebar and toggle the state! If you turn on a screen reader you will hear our checkbox be announced as a checkbox.</p><p>You might notice the screen reader also gives you a lot more information about how to interact with this element. This is because semantics matter <em>a lot</em> to assistive tech (AT).</p><p>If you activate the checkbox with the screen reader the state change isn’t announced. This is because we still haven’t finished filling in the accessibility tree. We have to use the aria-checkedattribute to signal the checkbox state change to AT.</p><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fembed%2Fpreview%2FzdJLMN%3Fheight%3D600%26slug-hash%3DzdJLMN%26default-tabs%3Djs%2Cresult%26host%3Dhttps%3A%2F%2Fcodepen.io%26embed-version%3D2&amp;url=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fpen%2FzdJLMN&amp;image=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fi.cdpn.io%2F18484.zdJLMN.small.9c9ba729-b058-449e-9dc4-9f568a8def6e.png&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=codepen" width="800" height="600" frameborder="0" scrolling="no"><a href="https://medium.com/media/4c7a885ca83554367d45f842086aa0cf/href">https://medium.com/media/4c7a885ca83554367d45f842086aa0cf/href</a></iframe><p>AT now will be able to tell what the current state of the checkbox is.</p><p>Now the checkbox can be toggled with AT, keyboard presses, and clicking. We’re done, right? Not quite! Form controls have special behavior with labels. For checkboxes clicking the label should focus on the linked checkbox and toggle it.</p><p>Let’s add that functionality with help from aria-labelledby. aria-labelledby allows us to label one element by linking it to the content of another. We’re going to use it to link the content of a label to our custom checkbox.</p><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fembed%2Fpreview%2FrzZyKd%3Fheight%3D600%26slug-hash%3DrzZyKd%26default-tabs%3Djs%2Cresult%26host%3Dhttps%3A%2F%2Fcodepen.io%26embed-version%3D2&amp;url=https%3A%2F%2Fcodepen.io%2Frobdel12%2Fpen%2FrzZyKd&amp;image=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fi.cdpn.io%2F18484.rzZyKd.small.e0d070e8-a9ae-49ee-aedb-2a582c03e42c.png&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=codepen" width="800" height="600" frameborder="0" scrolling="no"><a href="https://medium.com/media/8fcd684469f1e51e1577229bb796c246/href">https://medium.com/media/8fcd684469f1e51e1577229bb796c246/href</a></iframe><p>If you turn on a screen reader it will now read the label when the checkbox is focused. And if you click the label it should focus the checkbox and toggle it like a normal checkbox would.</p><p><strong>Whew, that’s a lot!</strong></p><p>That’s a lot of work to recreate something that seems as simple as a checkbox. And we didn’t cover the cases for linking your checkbox to a label by using the for attribute or nesting the checkbox inside of a label. You can see why accessibility is difficult — you have to recreate a lot of behavior you normally get for free. It’s not as simple as toggling an is-checked class.</p><h3>Introducing Checkbox.js</h3><p>To help simplify creating checkboxes that give you full freedom of styling (and whatever else), I’ve created a pure JavaScript library called <a href="https://robdel12.github.io/checkbox/">Checkbox.js</a> . It can turn basically any HTML element into a functional and accessible checkbox.</p><p>Checkbox.js also enables other features a checkbox usually has like linking a label by using the forattribute:</p><pre>&lt;label for=&quot;checkbox&quot;&gt;Label&lt;/label&gt;<br>&lt;span id=&quot;checkbox&quot;&gt;</pre><pre>&lt;script&gt;<br>  let checkbox = document.getElementById(&#39;checkbox&#39;)<br>  new Checkbox(checkbox);<br>&lt;/script&gt;</pre><p>And nesting a checkbox inside of the label will also work with Checkbox.js too:</p><pre>&lt;label&gt;<br>  Label<br>  &lt;span id=&quot;checkbox&quot;&gt;<br>&lt;/label&gt;</pre><pre>&lt;script&gt;<br>  let checkbox = document.getElementById(&#39;checkbox&#39;)<br>  new Checkbox(checkbox);<br>&lt;/script&gt;</pre><p>Checkbox.js is framework agnostic so you can use this anywhere there’s a DOM and JavaScript. For example a simple react component using Checkbox.js might look like:</p><pre>import React, { Component } from &#39;react&#39;;<br>import Checkbox from &#39;checkboxjs&#39;;</pre><pre>class ReactCheckbox extends Component {<br>  componentDidMount() {<br>    this.checkbox = new Checkbox(this.refs.checkbox, {<br>      isChecked: this.props.isChecked,<br>      label: this.props.label<br>    });<br>  }</pre><pre>render() {<br>    return (<br>      &lt;span ref=&quot;checkbox&quot; className=&quot;checkbox&quot; id={this.props.id}&gt;&lt;/span&gt;<br>    );<br>  }<br>}</pre><pre>export default ReactCheckbox;</pre><p>And you might use it like:</p><pre>&lt;label for=&quot;checkbox&quot;&gt;My Label&lt;/label&gt;<br>&lt;ReactCheckbox isChecked={true} id=&quot;checkbox&quot; /&gt;</pre><p>You can checkout the <a href="https://robdel12.github.io/checkbox/">full API &amp; documentation here</a> and the <a href="https://github.com/Robdel12/checkbox">GitHub repo here</a>.</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=64bd87b5c195" width="1" height="1" alt="">