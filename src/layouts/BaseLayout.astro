---
let {
  title,
  description = 'Software engineer that loves race cars',
  image = '/assets/images/robert-deluca-bio-portrait.jpg',
  type = 'website',
} = Astro.props
let canonicalUrl = new URL(Astro.url.pathname, Astro.site)
let pageTitle = title
  ? `${title} | Robert DeLuca | Software Engineer`
  : 'Robert DeLuca | Software Engineer'
let currentPath = Astro.url.pathname
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageTitle}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(image, Astro.site)} />
    <meta property="og:site_name" content="Robert DeLuca" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalUrl} />
    <meta property="twitter:title" content={pageTitle} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={new URL(image, Astro.site)} />
    <meta property="twitter:creator" content="@robertdeluca" />

    <link rel="stylesheet" href="/assets/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Robert DeLuca Blog"
      href="/rss.xml"
    />
    <script>
      ;(function () {
        window.counterscale = {
          q: [['set', 'siteId', 'robertdelu.ca'], ['trackPageview']],
        }
      })()
    </script>
    <script
      id="counterscale-script"
      data-site-id="robertdelu.ca"
      src="https://counterscale.robertdeluca19.workers.dev/tracker.js"
      defer></script>
  </head>
  <body>
    <header class="header">
      <a href="/" class="logo" aria-label="Robert DeLuca Logo">rd</a>
      <nav class="nav-wrapper">
        <ul>
          <li>
            <a
              href="/blog"
              class={currentPath.startsWith('/blog') ? 'active' : ''}>Blog</a
            >
          </li>
          <li>
            <a
              href="/apps/"
              class={currentPath.startsWith('/apps') ? 'active' : ''}>Apps</a
            >
          </li>
          <li>
            <button
              id="theme-toggle"
              class="theme-toggle"
              aria-label="Toggle dark mode"
            >
              <svg
                class="sun-icon"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="5"></circle>
                <path
                  d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
                ></path>
              </svg>
              <svg
                class="moon-icon"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
              </svg>
            </button>
          </li>
          <li>
            <a href="mailto:robertdeluca19@gmail.com">
              <svg
                width="27px"
                height="21px"
                viewBox="208 4 27 21"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <title>Contact Me</title>
                <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
                <defs></defs>
                <path
                  d="M230.610566,24 L211.859049,24 C209.730451,24 208,22.268446 208,20.1409507 L208,7.8590493 C208,5.73045109 209.730451,4 211.859049,4 L230.610566,4 C232.739164,4 234.469615,5.73045109 234.469615,7.8590493 L234.469615,20.1409507 C234.469615,22.268446 232.739164,24 230.610566,24 Z M211.859049,6.20580126 C210.94695,6.20580126 210.205801,6.94695048 210.205801,7.8590493 L210.205801,20.1409507 C210.205801,21.0519466 210.94695,21.7941987 211.859049,21.7941987 L230.610566,21.7941987 C231.521562,21.7941987 232.263814,21.0519466 232.263814,20.1409507 L232.263814,7.8590493 C232.263814,6.94695048 231.521562,6.20580126 230.610566,6.20580126 L211.859049,6.20580126 L211.859049,6.20580126 Z M224.139506,15.2474697 L222.702768,16.530054 C222.284769,16.9039374 221.759788,17.0914305 221.234808,17.0914305 C220.709827,17.0914305 220.184846,16.9039374 219.765744,16.5289511 L218.330161,15.2474187 L213.184736,20.3008713 C212.96967,20.5115253 212.690636,20.6163009 212.411603,20.6163009 L212.411603,20.6163009 C212.125951,20.6163009 211.8403,20.5060108 211.625234,20.2865336 C211.198412,19.8508878 211.205029,19.1538546 211.639572,18.7259292 L216.680674,13.7749353 L211.677071,9.30826073 C211.222676,8.90239329 211.182971,8.2053601 211.588839,7.75096504 C211.994706,7.29656998 212.691739,7.25686556 213.146134,7.66273299 L221.23591,14.8845263 L229.323481,7.66273299 C229.776773,7.25796846 230.474909,7.29656998 230.880776,7.75096504 C231.286644,8.2053601 231.246939,8.90239329 230.792544,9.30826073 L225.789558,13.7744579 L230.831146,18.7259292 C231.265689,19.1538546 231.271203,19.8519907 230.845484,20.2865336 C230.629315,20.5071137 230.343664,20.6163009 230.058013,20.6163009 L230.058013,20.6163009 C229.778979,20.6163009 229.499945,20.5104224 229.284879,20.3008713 L224.139506,15.2474697 Z"
                  id="email"
                  stroke="none"
                  fill="#0073FF"
                  fill-rule="evenodd"></path>
              </svg>
            </a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="container">
      <slot />
    </main>

    <script>
      ;(function () {
        let theme =
          localStorage.getItem('theme') ||
          (window.matchMedia('(prefers-color-scheme: dark)').matches
            ? 'dark'
            : 'light')

        function updateTheme() {
          if (theme === 'dark') {
            document.documentElement.classList.add('dark')
          } else {
            document.documentElement.classList.remove('dark')
          }

          let toggle = document.getElementById('theme-toggle')
          if (toggle) {
            let sunIcon = toggle.querySelector('.sun-icon')
            let moonIcon = toggle.querySelector('.moon-icon')
            if (theme === 'dark') {
              sunIcon.style.display = 'block'
              moonIcon.style.display = 'none'
            } else {
              sunIcon.style.display = 'none'
              moonIcon.style.display = 'block'
            }
          }
        }

        updateTheme()

        document.addEventListener('DOMContentLoaded', function () {
          let toggle = document.getElementById('theme-toggle')
          if (toggle) {
            toggle.addEventListener('click', function () {
              theme = theme === 'dark' ? 'light' : 'dark'
              localStorage.setItem('theme', theme)
              updateTheme()
            })
          }
          updateTheme()
        })
      })()
    </script>
  </body>
</html>
